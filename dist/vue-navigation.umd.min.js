/**
* vue-navigation v1.1.4
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueNavigation=t()}(this,function(){"use strict";function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(e){h(t,e,n[e])})}return t}var e=[];window.sessionStorage.VUE_NAVIGATION&&(e=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var I=e;function $(e,t){return"".concat(e.name||e.path,"?").concat(e.query[t])}var p=function(E,A,N,w){var e,t,n={FORWARD:(e=N)+"/FOROWRD",BACK:e+"/BACK",REPLACE:e+"/REPLACE",RESET:e+"/RESET",REFRESH:e+"/REFRESH"},R=n.FORWARD,S=n.BACK,b=n.REPLACE,x=n.REFRESH,o=n.RESET;A&&A.registerModule(N,{state:{routes:I},mutations:(t={},h(t,R,function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)}),h(t,S,function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)}),h(t,b,function(e,t){t.to,t.from;var n=t.name;e.routes.splice(I.length-1,1,n)}),h(t,x,function(e,t){t.to,t.from}),h(t,o,function(e){e.routes.splice(0,e.routes.length)}),t)});return{record:function(e,t,n){var o,r,i,a,c,s,u,f,l,m,h,g,p,y,d,v=$(e,w);if(n)g=v,p={route:e},y={route:t},d=A?A.state[N].routes:I,y.name=d[d.length-1]||null,p.name=g,A?A.commit(b,{to:p,from:y,name:g}):d.splice(I.length-1,1,g),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(d),E.$emit("replace",p,y);else{var O=I.lastIndexOf(v);-1===O?(f=v,l={route:e},m={route:t},h=A?A.state[N].routes:I,m.name=h[h.length-1]||null,l.name=f,A?A.commit(R,{to:l,from:m,name:f}):h.push(f),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(h),E.$emit("forward",l,m)):O===I.length-1?(c={route:e},s={route:t},u=A?A.state[N].routes:I,c.name=s.name=u[u.length-1],A&&A.commit(x,{to:c,from:s}),E.$emit("refresh",c,s)):(o=I.length-1-O,r={route:e},i={route:t},a=A?A.state[N].routes:I,i.name=a[a.length-1],r.name=a[a.length-1-o],A?A.commit(S,{to:r,from:i,count:o}):a.splice(I.length-o,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(a),E.$emit("back",r,i))}},reset:function(){A?A.commit(o):I.splice(0,I.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),E.$emit("reset")}}};return{install:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.router,o=t.store,r=t.moduleName,i=void 0===r?"navigation":r,a=t.keyName,c=void 0===a?"VNK":a;if(n){var s,u=new e,f=p(u,o,i,c),l=n.replace.bind(n),m=!1;n.replace=function(e,t,n){m=!0,l(e,t,n)},n.beforeEach(function(e,t,n){if(e.query[c])n();else{var o=g({},e.query);e.path===t.path&&function(e,t){if(e===t)return!0;var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;var r=!0,i=!1,a=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var u=c.value;if(e[u]!==t[u])return!1}}catch(e){i=!0,a=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw a}}return!0}(g({},e.query,h({},c,null)),g({},t.query,h({},c,null)))&&t.query[c]?o[c]=t.query[c]:o[c]="xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),n({name:e.name,params:e.params,query:o,replace:m||!t.query[c]})}}),n.afterEach(function(e,t){f.record(e,t,m),m=!1}),e.component("navigation",(s=c,{name:"navigation",abstract:!0,props:{},data:function(){return{routes:I}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(o=e,r=t,!(Array.isArray(o)?-1<o.indexOf(r):"string"==typeof o?-1<o.split(",").indexOf(r):isRegExp(o)&&o.test(r))){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}var o,r}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var e=this.$slots.default?this.$slots.default[0]:null;if(e){e.key=e.key||(e.isComment?"comment":e.tag);var t=$(this.$route,s);-1===e.key.indexOf(t)&&(e.key="__navigation-".concat(t,"-").concat(e.key)),this.cache[t]?e.key===this.cache[t].key?e.componentInstance=this.cache[t].componentInstance:(this.cache[t].componentInstance.$destroy(),this.cache[t]=e):this.cache[t]=e,e.data.keepAlive=!0}return e}})),e.navigation=e.prototype.$navigation={on:function(e,t){u.$on(e,t)},once:function(e,t){u.$once(e,t)},off:function(e,t){u.$off(e,t)},getRoutes:function(){return I.slice()},cleanRoutes:function(){return f.reset()}}}else console.error("vue-navigation need options: router")}}});