/**
* vue-navigation v1.1.3
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.VueNavigation=t()}(this,function(){"use strict";var e=[];window.sessionStorage.VUE_NAVIGATION&&(e=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var x=e;function I(e,t){return(e.name||e.path)+"?"+e.query[t]}var g=function(N,A,E,w){A&&A.registerModule(E,{state:{routes:x},mutations:{"navigation/FORWARD":function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)},"navigation/BACK":function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)},"navigation/REPLACE":function(e,t){t.to,t.from;var n=t.name;e.routes.splice(x.length-1,1,n)},"navigation/REFRESH":function(e,t){t.to,t.from},"navigation/RESET":function(e){e.routes.splice(0,e.routes.length)}}});return{record:function(e,t,n){var o,r,i,a,s,c,u,f,l,h,m,g,v,d,p,y=I(e,w);if(n)g=y,v={route:e},d={route:t},p=A?A.state[E].routes:x,d.name=p[p.length-1]||null,v.name=g,A?A.commit("navigation/REPLACE",{to:v,from:d,name:g}):p.splice(x.length-1,1,g),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(p),N.$emit("replace",v,d);else{var O=x.lastIndexOf(y);-1===O?(f=y,l={route:e},h={route:t},m=A?A.state[E].routes:x,h.name=m[m.length-1]||null,l.name=f,A?A.commit("navigation/FORWARD",{to:l,from:h,name:f}):m.push(f),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(m),N.$emit("forward",l,h)):O===x.length-1?(s={route:e},c={route:t},u=A?A.state[E].routes:x,s.name=c.name=u[u.length-1],A&&A.commit("navigation/REFRESH",{to:s,from:c}),N.$emit("refresh",s,c)):(o=x.length-1-O,r={route:e},i={route:t},a=A?A.state[E].routes:x,i.name=a[a.length-1],r.name=a[a.length-1-o],A?A.commit("navigation/BACK",{to:r,from:i,count:o}):a.splice(x.length-o,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(a),N.$emit("back",r,i))}},reset:function(){A?A.commit("navigation/RESET"):x.splice(0,x.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),N.$emit("reset")}}},v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}return{install:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.router,o=t.store,r=t.moduleName,i=void 0===r?"navigation":r,a=t.keyName,s=void 0===a?"VNK":a,c=t.noCacheList,u=void 0===c?[]:c;if(n){var f=new e,l=g(f,o,i,s),h=n.replace.bind(n),m=!1;n.replace=function(e,t,n){m=!0,h(e,t,n)},n.beforeEach(function(e,t,n){if(e.query[s])n();else{var o=v({},e.query);e.path===t.path&&function(e,t){if(e===t)return!0;var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;var r=!0,i=!1,a=void 0;try{for(var s,c=n[Symbol.iterator]();!(r=(s=c.next()).done);r=!0){var u=s.value;if(e[u]!==t[u])return!1}}catch(e){i=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw a}}return!0}(v({},e.query,d({},s,null)),v({},t.query,d({},s,null)))&&t.query[s]?o[s]=t.query[s]:o[s]="xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),n({path:e.path,query:o,replace:m||!t.query[s]})}}),n.afterEach(function(e,t){l.record(e,t,m),m=!1}),e.component("navigation",function(n){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:x}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(o=e,r=t,!(Array.isArray(o)?-1<o.indexOf(r):"string"==typeof o?-1<o.split(",").indexOf(r):isRegExp(o)&&o.test(r))){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}var o,r}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var e=this.$slots.default?this.$slots.default[0]:null;if(e){e.key=e.key||(e.isComment?"comment":e.tag);var t=I(this.$route,n);-1===e.key.indexOf(t)&&(e.key="__navigation-"+t+"-"+e.key),this.cache[t]?e.key===this.cache[t].key?e.componentInstance=this.cache[t].componentInstance:(this.cache[t].componentInstance.$destroy(),this.cache[t]=e):-1===o.indexOf(this.$router.history.current.name)&&(this.cache[t]=e),e.data.keepAlive=!0}return e}}}(s,u)),e.navigation=e.prototype.$navigation={on:function(e,t){f.$on(e,t)},once:function(e,t){f.$once(e,t)},off:function(e,t){f.$off(e,t)},getRoutes:function(){return x.slice()},cleanRoutes:function(){return l.reset()}}}else console.error("vue-navigation need options: router")}}});