/**
* vue-navigation v1.1.3
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
var routes=[];window.sessionStorage.VUE_NAVIGATION&&(routes=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var Routes=routes;function genKey(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function getKey(e,t){return(e.name||e.path)+"?"+e.query[t]}function matches(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!isRegExp(e)&&e.test(t)}function isObjEqual(e,t){if(e===t)return!0;var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;var r=!0,i=!1,a=void 0;try{for(var s,u=n[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;if(e[c]!==t[c])return!1}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}return!0}var Navigator=function(e,t,n,o){t&&t.registerModule(n,{state:{routes:Routes},mutations:{"navigation/FORWARD":function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)},"navigation/BACK":function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)},"navigation/REPLACE":function(e,t){t.to,t.from;var n=t.name;e.routes.splice(Routes.length-1,1,n)},"navigation/REFRESH":function(e,t){t.to,t.from},"navigation/RESET":function(e){e.routes.splice(0,e.routes.length)}}});return{record:function(r,i,a){var s=getKey(r,o);if(a)!function(o,r,i){var a={route:r},s={route:i},u=t?t.state[n].routes:Routes;s.name=u[u.length-1]||null,a.name=o,t?t.commit("navigation/REPLACE",{to:a,from:s,name:o}):u.splice(Routes.length-1,1,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),e.$emit("replace",a,s)}(s,r,i);else{var u=Routes.lastIndexOf(s);-1===u?function(o,r,i){var a={route:r},s={route:i},u=t?t.state[n].routes:Routes;s.name=u[u.length-1]||null,a.name=o,t?t.commit("navigation/FORWARD",{to:a,from:s,name:o}):u.push(o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),e.$emit("forward",a,s)}(s,r,i):u===Routes.length-1?function(o,r){var i={route:o},a={route:r},s=t?t.state[n].routes:Routes;i.name=a.name=s[s.length-1],t&&t.commit("navigation/REFRESH",{to:i,from:a}),e.$emit("refresh",i,a)}(r,i):function(o,r,i){var a={route:r},s={route:i},u=t?t.state[n].routes:Routes;s.name=u[u.length-1],a.name=u[u.length-1-o],t?t.commit("navigation/BACK",{to:a,from:s,count:o}):u.splice(Routes.length-o,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),e.$emit("back",a,s)}(Routes.length-1-u,r,i)}},reset:function(){t?t.commit("navigation/RESET"):Routes.splice(0,Routes.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),e.$emit("reset")}}},NavComponent=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:Routes}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(!matches(e,t)){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var n=this.$slots.default?this.$slots.default[0]:null;if(n){n.key=n.key||(n.isComment?"comment":n.tag);var o=getKey(this.$route,e);-1===n.key.indexOf(o)&&(n.key="__navigation-"+o+"-"+n.key),this.cache[o]?n.key===this.cache[o].key?n.componentInstance=this.cache[o].componentInstance:(this.cache[o].componentInstance.$destroy(),this.cache[o]=n):-1===t.indexOf(this.$router.history.current.name)&&(this.cache[o]=n),n.data.keepAlive=!0}return n}}},_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var index={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router,o=t.store,r=t.moduleName,i=void 0===r?"navigation":r,a=t.keyName,s=void 0===a?"VNK":a,u=t.noCacheList,c=void 0===u?[]:u;if(n){var f=new e,l=Navigator(f,o,i,s),h=n.replace.bind(n),g=!1;n.replace=function(e,t,n){g=!0,h(e,t,n)},n.beforeEach(function(e,t,n){if(e.query[s])n();else{var o=_extends({},e.query);e.path===t.path&&isObjEqual(_extends({},e.query,_defineProperty({},s,null)),_extends({},t.query,_defineProperty({},s,null)))&&t.query[s]?o[s]=t.query[s]:o[s]=genKey(),n({path:e.path,query:o,replace:g||!t.query[s]})}}),n.afterEach(function(e,t){l.record(e,t,g),g=!1}),e.component("navigation",NavComponent(s,c)),e.navigation=e.prototype.$navigation={on:function(e,t){f.$on(e,t)},once:function(e,t){f.$once(e,t)},off:function(e,t){f.$off(e,t)},getRoutes:function(){return Routes.slice()},cleanRoutes:function(){return l.reset()}}}else console.error("vue-navigation need options: router")}};export default index;