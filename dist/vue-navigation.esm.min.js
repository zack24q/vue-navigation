/**
* vue-navigation v1.1.4
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,n[t])})}return e}var routes=[];window.sessionStorage.VUE_NAVIGATION&&(routes=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var Routes=routes;function genKey(){return"xxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}function getKey(e,t){return"".concat(e.name||e.path,"?").concat(e.query[t])}function matches(e,t){return Array.isArray(e)?e.indexOf(t)>-1:"string"==typeof e?e.split(",").indexOf(t)>-1:!!isRegExp(e)&&e.test(t)}function isObjEqual(e,t){if(e===t)return!0;var n=Object.getOwnPropertyNames(e),o=Object.getOwnPropertyNames(t);if(n.length!==o.length)return!1;var r=!0,a=!1,i=void 0;try{for(var u,c=n[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var s=u.value;if(e[s]!==t[s])return!1}}catch(e){a=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw i}}return!0}function typeGenerate(e){return{FORWARD:e+"/FOROWRD",BACK:e+"/BACK",REPLACE:e+"/REPLACE",RESET:e+"/RESET",REFRESH:e+"/REFRESH"}}var Navigator=function(e,t,n,o){var r,a=typeGenerate(n),i=a.FORWARD,u=a.BACK,c=a.REPLACE,s=a.REFRESH,f=a.RESET;t&&t.registerModule(n,{state:{routes:Routes},mutations:(r={},_defineProperty(r,i,function(e,t){t.to,t.from;var n=t.name;e.routes.push(n)}),_defineProperty(r,u,function(e,t){t.to,t.from;var n=t.count;e.routes.splice(e.routes.length-n,n)}),_defineProperty(r,c,function(e,t){t.to,t.from;var n=t.name;e.routes.splice(Routes.length-1,1,n)}),_defineProperty(r,s,function(e,t){t.to,t.from}),_defineProperty(r,f,function(e){e.routes.splice(0,e.routes.length)}),r)});return{record:function(r,a,f){var l=getKey(r,o);if(f)!function(o,r,a){var i={route:r},u={route:a},s=t?t.state[n].routes:Routes;u.name=s[s.length-1]||null,i.name=o,t?t.commit(c,{to:i,from:u,name:o}):s.splice(Routes.length-1,1,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(s),e.$emit("replace",i,u)}(l,r,a);else{var m=Routes.lastIndexOf(l);-1===m?function(o,r,a){var u={route:r},c={route:a},s=t?t.state[n].routes:Routes;c.name=s[s.length-1]||null,u.name=o,t?t.commit(i,{to:u,from:c,name:o}):s.push(o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(s),e.$emit("forward",u,c)}(l,r,a):m===Routes.length-1?function(o,r){var a={route:o},i={route:r},u=t?t.state[n].routes:Routes;a.name=i.name=u[u.length-1],t&&t.commit(s,{to:a,from:i}),e.$emit("refresh",a,i)}(r,a):function(o,r,a){var i={route:r},c={route:a},s=t?t.state[n].routes:Routes;c.name=s[s.length-1],i.name=s[s.length-1-o],t?t.commit(u,{to:i,from:c,count:o}):s.splice(Routes.length-o,o),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(s),e.$emit("back",i,c)}(Routes.length-1-m,r,a)}},reset:function(){t?t.commit(f):Routes.splice(0,Routes.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),e.$emit("reset")}}},NavComponent=function(e){return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:Routes}},computed:{},watch:{routes:function(e){for(var t in this.cache)if(!matches(e,t)){var n=this.cache[t];n&&n.componentInstance.$destroy(),delete this.cache[t]}}},created:function(){this.cache={}},destroyed:function(){for(var e in this.cache){var t=this.cache[e];t&&t.componentInstance.$destroy()}},render:function(){var t=this.$slots.default?this.$slots.default[0]:null;if(t){t.key=t.key||(t.isComment?"comment":t.tag);var n=getKey(this.$route,e);-1===t.key.indexOf(n)&&(t.key="__navigation-".concat(n,"-").concat(t.key)),this.cache[n]?t.key===this.cache[n].key?t.componentInstance=this.cache[n].componentInstance:(this.cache[n].componentInstance.$destroy(),this.cache[n]=t):this.cache[n]=t,t.data.keepAlive=!0}return t}}},index={install:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.router,o=t.store,r=t.moduleName,a=void 0===r?"navigation":r,i=t.keyName,u=void 0===i?"VNK":i;if(n){var c=new e,s=Navigator(c,o,a,u),f=n.replace.bind(n),l=!1;n.replace=function(e,t,n){l=!0,f(e,t,n)},n.beforeEach(function(e,t,n){if(e.query[u])n();else{var o=_objectSpread({},e.query);e.path===t.path&&isObjEqual(_objectSpread({},e.query,_defineProperty({},u,null)),_objectSpread({},t.query,_defineProperty({},u,null)))&&t.query[u]?o[u]=t.query[u]:o[u]=genKey(),n({name:e.name,params:e.params,query:o,replace:l||!t.query[u]})}}),n.afterEach(function(e,t){s.record(e,t,l),l=!1}),e.component("navigation",NavComponent(u)),e.navigation=e.prototype.$navigation={on:function(e,t){c.$on(e,t)},once:function(e,t){c.$once(e,t)},off:function(e,t){c.$off(e,t)},getRoutes:function(){return Routes.slice()},cleanRoutes:function(){return s.reset()}}}else console.error("vue-navigation need options: router")}};export default index;